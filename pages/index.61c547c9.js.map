{"mappings":"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","sources":["src/js/publish.js"],"sourcesContent":["\n  //  PUBLISH TO IPFS\n    \n  async function createIPFSDelivery(){\n  \n    //   if (!user) { \n    \n    if(typeof userAddress === 'undefined'){\n        Swal.fire({\n          title: \"Connect first\",\n             imageUrl: 'undraw_login_re_4vu2.svg', \n             imageWidth: 400, \n             imageHeight: 200, \n             imageAlt: 'Connect!',\n          showCancelButton: true,\n          confirmButtonText: 'connect',\n          showLoaderOnConfirm: true,\n          allowOutsideClick: () => {\n            const popup = Swal.getPopup()\n            popup.classList.remove('swal2-show')\n            setTimeout(() => {\n              popup.classList.add('animate__animated', 'animate__headShake')\n            })\n            setTimeout(() => {\n              popup.classList.remove('animate__animated', 'animate__headShake')\n            }, 500)\n            return false\n          },\n      \n        })\n        .then((result) => {\n          if (result.isConfirmed) {\n            console.log('ok pressed',result)\n        // login();\n        openModal('#walletOptions')\n      \n            return\n          } \n        })\n      return\n      }\n      \n    \n        let loadIAM = localStorage.getItem('iamcode')\n        let loadIAMIMG = localStorage.getItem('image')\n        if (!loadIAM || !loadIAMIMG){\n          Toast.fire( 'complete IAM code before sending documents','', \"error\");\n          restoreEnvoiButton();\n          return\n        }\n      \n      \n        // DISPLAY LOADER in button\n        document.getElementById('createIPFSDelivery').innerHTML = ` <span class=\"spinner-grow spinner-grow-sm\"></span> `;\n        document.getElementById('createIPFSDelivery').disabled = true;\n        \n        //GET USER ADDRESS\n    \n          // CREATE JSON OBJECT WITH DATA\n            let iamCode2Sign = localStorage.getItem('iamcode')\n            let iamPhoto2Sign = ' '\n            let documents = JSON.parse(localStorage.getItem('documents')) || [];\n            let attestationLink= localStorage.getItem('iamAttestation');\n            JSON2SIGN= {iamDocuments: documents,iamCode: iamCode2Sign,iamPhoto: iamPhoto2Sign,iamAddress: userAddress,iamDocuments: documents, iamAttestationLink: attestationLink};\n            // JSON2SIGN= {iamDocuments: documents,iamCode: iamCode2Sign,iamPhoto: iamPhoto2Sign,iamAddress: userAddress,iamDocuments: documents};\n      \n      \n            // HASH JSON\n            // var json = JSON.stringify(JSON2SIGN);\n            // let hashedJson = ethers.utils.solidityKeccak256( [ \"string\"], [ json] );\n    \n            // FIX PROBLEMA DE VERIFICACION DE KEY\n            let hashedJson = ethers.utils.solidityKeccak256( [ \"string\"], [ JSON2SIGN] );\n    \n            // console.log('json:',json)\n            console.log('hashedJson:',hashedJson)\n      \n            \n             // ASK USER TO SIGN\n             await Swal.fire({\n              title: 'SIGN THIS HASH TO CONTINUE',\n              icon: 'info',\n              html:hashedJson,\n              showCancelButton: true,\n              confirmButtonText:'<i class=\"fa-solid fa-signature\"></i> Sign!',\n              confirmButtonAriaLabel: 'Sign!',\n              showLoaderOnConfirm: true,\n              footer: '<a target=\"_blank\" href=\"/docs/index.html#/?id=signatures\">What is a signature?</a>',\n              allowOutsideClick: () => {\n              const popup = Swal.getPopup()\n              popup.classList.remove('swal2-show')\n              setTimeout(() => { popup.classList.add('animate__animated', 'animate__headShake') })\n              setTimeout(() => { popup.classList.remove('animate__animated', 'animate__headShake') }, 500)\n              }\n              })\n              .then( async (result) => {\n              if (result.isConfirmed) {\n              console.log('ok pressed',result,hashedJson)\n              \n              // SIGN JSON    \n              let walletChoice = localStorage.getItem('wallet');\n    \n              if (walletChoice) {\n    \n                console.log('THERE IS WALLET  CHOICE SAVED IN LOCALSTORAGE')\n                \n                // IsMetamask\n                if(walletChoice == \"METAMASK\"){\n                  console.log('SIGN WITH METAMASK')\n                       // 1- GET SIGNER\n                       try { provider = new ethers.providers.Web3Provider(window.ethereum) }\n                       catch (error) { console.log(error.message); fixedToast.fire( 'Error',error.message, \"error\"); }\n                   \n                       try { signer = provider.getSigner()}\n                       catch (error) { console.log(error.message); }\n                       \n                       // 2- NOW SIGN\n                       let toSign = ethers.utils.arrayify(hashedJson)\n                       try{ signature = await signer.signMessage( toSign );}\n                       catch (error) { console.error(\"An error occurred:\", error); Toast.fire( 'An error occurred','', \"error\"); return }\n                       console.log('signature:', signature ) ;\n                    }\n                    \n                    \n            // -------------------------------------------------------\n            // IsLocawallet\n                if(walletChoice ==\"LOCALWALLET\"){\n                    console.log('SIGNING WITH LOCALWALLET')\n    \n                // GET PASSWORD\n                Swal.fire({\n                    title: 'Decrypt your wallet to sign this hash',\n                    input: 'password',\n                    inputAttributes: { autocapitalize: 'off' },\n                    showCancelButton: true,\n                    confirmButtonText: 'Enter',\n                    showLoaderOnConfirm: true,\n                    backdrop: true,\n                    preConfirm: (login) => { },\n                    allowOutsideClick: () => {\n                        const popup = Swal.getPopup()\n                        popup.classList.remove('swal2-show')\n                        setTimeout(() => { popup.classList.add('animate__animated', 'animate__headShake') })\n                        setTimeout(() => { popup.classList.remove('animate__animated', 'animate__headShake') }, 500)\n                        return false\n                    },\n                })\n            .then((result) => {\n                if (result.isConfirmed) {\n                    if(result.value ==''){ console.log('IS EMPTY'); Toast.fire({ icon: 'error', title: 'Password cannot be empty' }); return; }\n    \n                    // Use the Wallet.fromEncryptedJson() method to decrypt the wallet\\\n                    let encryptedJson = localStorage.getItem('jsonWallet')\n    \n                    // SHOW DECRYPT PROGRESS \n                    const progressCallback = (percent) => {\n                    // Update the progress bar\n                    console.log(`Decrypting... `);\n                    walletProgressContent.innerHTML =`<div ;class=\"progress\">\n                    <div class=\"progress-bar\" role=\"progressbar\" style=\"width:  ${percent*100}%;\" aria-valuenow=\"${percent*100}\" aria-valuemin=\"0\" aria-valuemax=\"100\">${ Math.round(percent * 100)}%</div>\n                  </div>`\n                    };\n    \n    \n                    // ethers.Wallet.fromEncryptedJson(encryptedJson, result.value)\n                    openModalId('#walletProgress')\n                    // openModal('#walletProgress')\n                    ethers.Wallet.fromEncryptedJson(encryptedJson, result.value, progressCallback)\n                        .then(async(wallet) => {\n                          console.log(\"wallet:\", wallet);\n     \n                    // SIGN!\n                    // 1- GET SIGNER\n                        try { provider = new ethers.providers.JsonRpcProvider(`${optionsList[0].API}`);}\n                        catch (error) { console.log(error.message); fixedToast.fire( 'Error',error.message, \"error\"); }\n                        console.log('provider:', provider)\n                   \n    \n                    // try { signer = provider.getSigner()}\n                        try { signer = wallet.connect(provider);}\n                        catch (error) { console.log(error.message);}\n                        console.log('signer:', signer)\n    \n                    //   // 2- NOW SIGN\n                    let toSign = ethers.utils.arrayify(hashedJson)\n                        try{ signature = await signer.signMessage(toSign);}\n                        catch (error) { console.error(\"An error occurred:\", error); Toast.fire( 'An error occurred','', \"error\"); closeWalletProgress.disabled= false; return }\n    \n                        console.log(\"RESULT:\", signature);\n                          // ......Queue...Queue...Queue...Queue...Queue..\n    \n    \n                        // PREPARE JSON FOR SIGNED WEBPAGE\n                        console.log('JSON2SIGN: ',JSON2SIGN)\n\n                        // USE THIS jsonforwebsite to ATTEST (nope, not here... just cid)\n                        let jsonforwebsite =JSON.stringify(JSON2SIGN)\n                        console.log('jsonforwebsite: ',jsonforwebsite)\n\n\n\n                        let sigObject = {iamSignature: signature}\n                        let signatureforwebsite =JSON.stringify(sigObject)\n                        \n                        // error\n                        let iamphoto = localStorage.getItem('image');\n                        \n                        \n                        //  CREATE SIGNEDIPFS WEBSITE\n                        let signedIpfsWebsite;\n                        try { signedIpfsWebsite =  await signedipfsWebsite( jsonforwebsite, signatureforwebsite,iamphoto); }\n                        catch (error) { \n                          console.log(error.message, 'ERROR EN  signedipfsWebsite()'); \n                          closeModalId('#walletProgress');\n                          reloadTranslations();\n                          document.getElementById('createIPFSDelivery').disabled = false;\n                          return }\n    \n                        // PREPARE FILE\n                        let name = 'ipfspage.html';// funciona...\n                        const files = [ new File([signedIpfsWebsite], name) ]\n                        console.log('FILES: ',files)\n    \n                         // UPLOAD TO IPFS\n                        const client = makeStorageClient()\n                        try { CID =  await client.put(files, { wrapWithDirectory:false })}\n                        catch (error) { console.log(error.message); restoreEnvoiButton();return }\n    \n    \n                        let ipfsLink = `${ipfsGateway}${CID}`\n                        console.log('IPFS STORED FILE AT :',ipfsLink)\n                        localStorage.setItem('lastIpfsDistroCID', CID);\n                        // localStorage.setItem('lastIpfsDistroCID', ipfsLink);\n                        \n                        // USE THIS CID to ATTEST!!!\n                        console.log('cid:' ,CID);\n\n                        // DO SOMETHING HERE... -------------------------------------------------------------\n\n                        //TIMESTAMP IN UNIXTIME\n                        const timestamp = Math.floor(new Date().getTime() / 1000);\n                        console.log(timestamp);\n\n                         // GET SIGNER\n                         const address = await signer.getAddress();\n                            console.log('ADDRESS:', address)\n                        const EASContractAddress = \"0xC2679fBD37d54388Ce493F1DB75320D236e1815e\"; // Sepolia Testnet v0.26\n                        let eas= new EAS(EASContractAddress);\n                        console.log('provider: ', provider);\n                        eas.connect(provider);\n                        \n                        // PREAPARE DATA\n                        console.log('offchainIAM')\n                        let inputString = localStorage.getItem('iamcode')\n                        const bytes32Value = stringToBytes32(inputString);\n                        console.log(bytes32Value);\n                        const offchain = await eas.getOffchain();\n                        \n                        // ATTEST FOR PUBLIC DOCUMENTS\n                        const schemaEncoder = new SchemaEncoder(\"bytes32 IAMcode,address IAMaddress,string CID\");\n                        const encodedData = schemaEncoder.encodeData([\n                            { name: \"IAMcode\", value: bytes32Value, type: \"bytes32\" },\n                            // { name: \"IAMattest\", value: bytes32iamattest, type: \"bytes32\" },//prev iam code attest\n                            { name: \"IAMaddress\", value: address, type: \"address\" },\n                            { name: \"CID\", value: CID, type: \"string\" },\n                        ]);\n\n                        let referencedUID = localStorage.getItem('iamcodeUID');\n                        console.log('referencedUID: ', referencedUID)\n\n                        const offchainAttestation = await offchain.signOffchainAttestation({\n                        recipient: signer.address,\n                        expirationTime: 0,\n                        time: timestamp,\n                        revocable: true,\n                        version: 1,\n                        nonce: 0,\n                        schema: \"0xa1c7d32280a93b1d57e811407f74c52b8991ccbe514a2309962831163ad36682\",\n                        refUID: referencedUID,// here reference Iam code\n                        // refUID: '0x0000000000000000000000000000000000000000000000000000000000000000',\n                        data: encodedData,\n                        }, signer);\n                        console.log('offchainAttestation:' ,offchainAttestation)\n                        o = offchainAttestation;\n                        y= JSON.stringify(o)\n                        let offchainobject  = {sig: offchainAttestation, signer: signer.address}\n\n                        const url = createOffchainURL(offchainobject);\n                        console.log('URL:','https://sepolia.easscan.org'+url )\n                        const fullOffchainAttestLink = 'https://sepolia.easscan.org'+url;\n                              localStorage.setItem('fullAttestation', fullOffchainAttestLink)\n\n                        \n                        // END... -------------------------------------------------------------\n                        // SAVE SIGNED JSON INTOLOCALSTORAGE\n                        localStorage.setItem('signedJson',jsonforwebsite )\n    \n                        //DELETE OLD LOCALSTORAGE\n                        localStorage.removeItem('IPFSdistributions')\n    \n                        \n                        //SAVE TO LOCALSTORAGE\n                        let ipfsDistro = { cid: CID, timestamp: timestamp, signature: signature, address:userAddress, signedJSON: jsonforwebsite }// agregar signedJSON\n                        // let ipfsDistro = { cid: CID, timestamp: timestamp, iamattestation: fullOffchainAttestLink,signature: signature, address:userAddress, signedJSON: jsonforwebsite }// agregar signedJSON\n                        console.log('ipfsDistro: ',ipfsDistro)\n                        SaveDataToLocalStorage(ipfsDistro);//save to IPFSdistributions\n    \n                        \n                        setTimeout(() => {\n                          window.scrollTo({ top: 0, behavior: 'smooth' });\n                          Toastcenter.fire( '','Done!', \"success\");\n                        }, 400);\n    \n      \n                        // SUCCESS MESSAGE\n                        closeModalId('#walletProgress')\n    \n    \n    \n                        // FIREFOWKS\n                        // startConfetti();\n                        setTimeout(() => {\n                        // stopConfetti();\n                        closeWalletProgress.disabled= false\n                        // reloadIpfsDistros(0)\n                        document.getElementById('soveraindocspremint').style.display='none'\n                        reloadIpfsDistros()\n    \n    \n                        }, 2000);\n    \n    \n    \n                    })\n                    .catch((error) => {\n                    console.log(\"Error:\", error);\n                    closeWalletProgress.disabled= false\n                    fixedToast.fire( 'Error',error.message, \"error\");\n                    document.getElementById('createIPFSDelivery').innerHTML = `PUBLISH `;\n                    document.getElementById('createIPFSDelivery').disabled = false;\n                    });\n    \n    \n                    }\n                })\n            }\n    }\n       \n              \n                \n            \n            }  else if (result.isDismissed) {\n              Toast.fire('', 'Signing canceled!', \"info\");\n              restoreEnvoiButton();\n              reloadTranslations();\n              // return \n            }\n      \n      \n              })\n       \n        };\n      \n\n\n\n  /*********************************************************************************************\n  .) signedipfsWebsite() \n    CREATE SIGNED IPFS WEBPAGE\n    creates JSON, sign it, creates a webpage with json and signature, uploads it to IPFS and returns CID\n     <meta http-equiv=”Content-Security-Policy” content=”connect-src 'self' blob: data: https://*.w3s.link https://*.nftstorage.link https://*.dweb.link https://ipfs.io/ipfs/ https://*.web3.storage https://*.nft.storage https://tableland.network https://*.tableland.network\" ; default-src ’self’ 'unsafe-inline' 'unsafe-eval' *.w3s.link   ${ipfsGateway} ${ipfsGatewayCID};”>\n     <meta http-equiv=”Content-Security-Policy” content=”  data: https://*.w3s.link https://*.nftstorage.link https://*.dweb.link https://ipfs.io/ipfs/ https://*.web3.storage https://*.nft.storage https://tableland.network https://*.tableland.network ; default-src ’self’ 'unsafe-inline' 'unsafe-eval' *.w3s.link   ${ipfsGateway} ${ipfsGatewayCID};”>\n  **********************************************************************************************/\n\n      async function signedipfsWebsite (signedjson,signature,iamphoto){ \n        \n        let ipfsurl = '*.ipfs.w3s.link';\n        let fontsurl  ='fonts.googleapis.com';\n         \n      \n      let verifiedWebpage = `<!doctype html>\n      <html><head>      \n      <meta http-equiv=\"Content-Security-Policy\" content=\"\n      img-src 'self' data: ${ipfsurl} ;\n      style-src-elem 'self'  'unsafe-inline' ${ipfsurl} ${fontsurl};\">\n      <meta charset=\"utf-8\"><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\"><link rel=\"icon\" href=\"${ipfsGatewayCID}favicon.55e17813.ico\" type=\"image/x-icon\"><title></title><link rel=\"stylesheet\" href=\"${ipfsGatewayCID}jsonVerifyCID.cf7b0304.css\"><style> #head{height: 145px;}@media (max-width: 768px) { #head{font-size: 15vw;} } </style></head><body> <nav class=\" navbar navbar-expand-sm\"> <div class=\"container-fluid justify-content-center\"> <a class=\"navbar-brand\" href=\"#\"> <img src=\"https://bafkreic75qivovknpkz2sp2nwhxjyhshiuibtgvtjstp4cnxtywxhwgrue.ipfs.w3s.link/\" alt=\"Avatar Logo\" style=\"width:40px\" class=\"rounded-pill\"> </a> </div> </nav> <div type=\"application/json\" id=\"signed\">${signedjson}</div> <div type=\"application/json\" id=\"signature\">${signature}</div> \n      <div id=\"content\" class=\"container\" style=\"display:none\"> <div id=\"head\"> <div id=\"iamInfo\"> <h1 id=\"iamCode\"></h1> \n      <h3 id=\"iamTokenId\" style=\"font-size: 1.4rem;\"> <code><a id=\"attestationLink\" href=\"\" target=\"_blank\" rel=\"noopener noreferrer\"> attestation</a>    </code></h3> </div> <img id=\"iamTokenImg\" src=${iamphoto}></div> \n      <table class=\"table\" id=\"myTable\" data-card-width=\"837\"> <thead> <tr> <th data-card-title=\"\">Title</th> <th data-card-action-links=\"\">CID</th>\n       <th data-card-footer=\"\">Attestation</th> </tr> </thead> <tbody id=\"tbody\"> </tbody> </table> </div> <ol id=\"footer\" class=\"list-group list-group-numbered container\" style=\"display:none\"> <li class=\"list-group-item\">ADDRESS: <br> <p id=\"iamAddress\" style=\"word-wrap:break-word\"></p> <svg id=\"addrTrue\"  style=\"display:none\" width=\"18\" height=\"16\" viewBox=\"0 0 512 512\"  xmlns:svg=\"http://www.w3.org/2000/svg\">   <path d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\" id=\"addressIsTrue\" style=\"fill:#00ff00\" /> </svg><svg id=\"addrFalse\"  style=\"display:none\"  width=\"18\" height=\"16\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\"><path d=\"M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z\" id=\"addressIsFalse\" style=\"fill:#ff0000\"/></svg>   </li> <li class=\"list-group-item\"> HASH:<p id=\"iamHash\" style=\"word-wrap:break-word\"> </p></li> <li class=\"list-group-item\">SIGNATURE <p id=\"iamSignature\" style=\"word-wrap:break-word\"></p></li> </ol>\n      <script id=\"INIT\">signed.style.display=\"none\",signature.style.display=\"none\",content.style.display=\"block\",footer.style.display=\"block\",ipfsGateway=\"${ipfsGateway}\";</script> \n      <script src=\"${ipfsGatewayCID}jsonVerifyCID.336889fc.js\"></script>\n      <script src=\"${ipfsGatewayCID}jsonVerifyCID.20251b0b.js\"> </script>  \n      <script src=\"${ipfsGatewayCID}jsonVerifyCID.20251b0b.js\"> </script>  \n      <script src=\"https://bafybeiajps2emmwlgbfd2c3getgjmrczlwpy6k7jsmseiq246uxnyurouq.ipfs.w3s.link/script.min.js\"></script> \n      <script>attestationLink.href = signedJson.iamAttestationLink</script> \n      <script src=\"${ipfsGatewayCID}jsonVerifyCID.98ee8ceb.js\"></script> \n      <script src=\"${ipfsGatewayCID}jsonVerifyCID.73cbde04.js\"></script> \n      </body></html>`;\n       \n      return verifiedWebpage\n    }\n  \n\n\n  // *********************************\n  // reloadIpfsDistros()\n  // *********************************\n  async function reloadIpfsDistros(){\n    console.log('RELOADIPFSDISTROS ')\n    let index = 0 ;\n    // ADD IAM\n    let ipfsDistros = JSON.parse(window.localStorage.getItem('IPFSdistributions'));\n    if(!ipfsDistros){\n        console.log('THERE IS NO ipfsDistros')\n        return\n    }\n\n    let ipfsdist = JSON.parse(ipfsDistros[0].signedJSON)\n    let iamcode = ipfsdist.iamCode;\n    let cid = ipfsdist.cid;\n    console.log('CID: ', ipfsdist)\n    // ----------------\n    // CALCULATE TIME PASSED\n        function formatTimeComponent(value, unit) {\n          return value === 1 ? `${value} ${unit}` : `${value} ${unit}s`;\n        }\n\n        // Example Unix timestamp in seconds\n        // const unixTimestampInSeconds = 1678771200;\n        const unixTimestampInSeconds = ipfsDistros[0].timestamp;\n\n        // Convert the Unix timestamp to milliseconds\n        const unixTimestampInMillis = unixTimestampInSeconds * 1000;\n\n        // Get the current time in milliseconds\n        const currentTimeInMillis = new Date().getTime();\n\n        // Calculate the time difference in milliseconds\n        const timeDifferenceInMillis = currentTimeInMillis - unixTimestampInMillis;\n\n        // Convert the time difference to days, hours, minutes, and seconds\n        const daysPassed = Math.floor(timeDifferenceInMillis / (1000 * 60 * 60 * 24));\n        const hoursPassed = Math.floor((timeDifferenceInMillis % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n        const minutesPassed = Math.floor((timeDifferenceInMillis % (1000 * 60 * 60)) / (1000 * 60));\n        const secondsPassed = Math.floor((timeDifferenceInMillis % (1000 * 60)) / 1000);\n\n        // Build the output string\n        let output = \"Updated \";\n        if (daysPassed > 0) {\n          output += formatTimeComponent(daysPassed, \"day\");\n        }\n        if (hoursPassed > 0) {\n          output += formatTimeComponent(hoursPassed, \"hour\");\n        }\n        if (minutesPassed > 0) {\n          output += formatTimeComponent(minutesPassed, \"minute\");\n        }\n        if (daysPassed === 0 && hoursPassed === 0 && minutesPassed === 0) {\n          output += formatTimeComponent(secondsPassed, \"second\");\n        }\n\n        console.log(output + \" ago\");\n\n    // -------------\n    let lIDC = localStorage.getItem('lastIpfsDistroCID');\n   \n    if(!lIDC){ \n      console.log('CID v2 NOT FOUND',lIDC) \n    } else { \n      console.log('CID v3: ', lIDC)\n       fulllinkfromCID = `${ipfsGateway}${lIDC}`\n      console.log('fulllinkfromCID: ', fulllinkfromCID)\n\n      \n     }\n\n    let docs = ipfsdist.iamDocuments;\n    console.log('DOCS LENGTH: ', docs.length)\n    linkIPFS = `${ipfsGateway}${lIDC}`;// dejar el espacio para poder cambiar el link ipfs desde la UI en caso de update\n    console.log('linkIPFS???',linkIPFS)\n    let srcimg = await JSON.parse(window.localStorage.getItem('image'));\n    if(!srcimg){ console.log('NO SRCIMG'); return}\n    let img =  srcimg\n\n    // get offchain attestation\n        let offchainAttestation = localStorage.getItem('iamAttestation')\n        let fulloffchainAttestation = localStorage.getItem('fullAttestation')\n        let UID = localStorage.getItem('iamcodeUID')\n        let fulliamAttestation = localStorage.getItem('iamAttestation')\n\nconsole.log('CLEARING #MAIN')\ndocument.getElementById('soveraindocs').setAttribute('style', 'display:inline!important');\n    soveraindocs.innerHTML = ` \n    <div class=\"container\">\n    <div class=\"row\">\n    <div class=\"col-md-6 center\">\n    <div class=\"card flex-row mb-4\">\n    <div class=\"card-body\">\n    <div id=\"canvas\"></div>\n    \n    </div>\n    </div>\n    </div>\n    \n    <div class=\"col-md-6\">\n    <div class=\"card flex-row mb-4\">\n    <div class=\"card-body\">\n    <p class=\"card-text published\">Public Documents (<code>${docs.length}</code>): <code>   \n    <a href=\"${fulllinkfromCID}\" style='display:none' target=\"_blank\" rel=\"noopener noreferrer\">${lIDC}</a>\n    <i class=\"fas fa-eye cursor\" aria-hidden=\"true\" onclick=\"event.stopPropagation();viewItem('${lIDC}')\"></i> \n    \n    <i class=\"fas fa-trash cursor\" aria-hidden=\"true\" onclick=\"event.stopPropagation();deleteIpfsDistro((this.parentElement))\"></i> \n    \n    </code></p>\n\n    <p class=\"card-text\">Public Documents Attestation: <code>\n    <i class=\"fas fa-eye cursor\" aria-hidden=\"true\" onclick=\"event.stopPropagation();openLink('${fulloffchainAttestation}')\"></i> \n    <a href=\"${fulloffchainAttestation}\" style='display:none'  target=\"_blank\" rel=\"noopener noreferrer\">\n    <i class=\"fas fa-eye cursor\" aria-hidden=\"true\" ></i> \n    </a>\n    <button class='linktypebuton' onclick=\"event.stopPropagation();makeOnchain()\">make public</button>\n    </code></p>\n\n    <p class=\"card-text\">IAM code Attestation: <code>\n    <i class=\"fas fa-eye cursor\" aria-hidden=\"true\" onclick=\"event.stopPropagation();openLink('${fulliamAttestation}')\"></i> \n    <button class='linktypebuton' onclick=\"event.stopPropagation();makeIAMOnchain()\">make public</button>\n    </code></p>\n\n\n\n\n    <p class=\"card-text\">NFT: \n    <code>  \n     <button class='linktypebuton' onclick=\"event.stopPropagation();mint()\">mint(onchain)</button>\n    \n    <i class=\"fas fa-trash\" style=\"display:none\" aria-hidden=\"true\" onclick=\"event.stopPropagation();burnNFT((this.parentElement))\"></i> \n    \n    </code>\n\n    </p>\n    \n    <div class=\"card flex-row mb-4\">\n\n\n    <a href=\"#\" class=\"btn btn-danger\" onclick=\"event.stopPropagation();receive()\" data-bs-toggle=\"tooltip\" title=\"Receive\"><i class=\"fas fa-satellite-dish\"></i> </a>\n    <a href=\"#\" class=\"btn btn-success\" onclick=\"event.stopPropagation();openWalletSend()\"  data-bs-toggle=\"tooltip\"  title=\"Send\"><i class=\"fas fa-paper-plane\"></i> </a>\n    <button id='amount'> \n\n          <div id=\"loader\" class=\"loader\">\n          <i class=\"fas fa-circle-notch fa-spin\"></i>\n        </div>\n          </button>\n\n\n          </div>\n          <br>\n\n    <a href=\"#\"  style=\"display:none\" class=\"btn btn-primary\" onclick=\"event.stopPropagation();mintUPT()\">+ATTEST</a>\n    <a href=\"#\" class=\"btn btn-primary\" onclick=\"event.stopPropagation();editIpfsDistro()\">+DOCUMENTS</a>\n\n\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div id=\"content\" class=\"container\" style=\"display:none\">\n\n    <div id=\"head\"> \n          <div id=\"iamInfo\"> \n                <h1 id=\"iamCode\">\n                <a class=\"iamlink\" href=\"${offchainAttestation}\" target=\"_blank\" rel=\"noopener noreferrer\">${iamcode}</a>   \n                </h1> \n                <h3 id=\"iamTokenId\"></h3> \n          </div>\n          <img id=\"iamImg\" src=\"${img}\" > \n    </div> \n    \n    <table class=\"table\" id=\"myTable\" data-card-width=\"837\"> \n          <thead> <tr> \n          <th data-card-title=\"\">Title</th> \n          <th data-card-action-links=\"\">CID</th> \n       <th data-card-footer=\"\">Actions</th> \n       \n          \n          </tr> </thead> <tbody id=\"tbody\"> </tbody> \n    </table> \n    </div> \n    \n    <ol id=\"footer\" class=\"list-group list-group-numbered container\" style=\"display:none\"> \n    <li class=\"list-group-item\">ADDRESS: <br>\n          <p id=\"iamAddress\" style=\"word-wrap:break-word\"></p>\n          <svg id=\"addrTrue\"  style=\"display:none\" width=\"18\" height=\"16\" viewBox=\"0 0 512 512\"  xmlns:svg=\"http://www.w3.org/2000/svg\">   <path d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\" id=\"addressIsTrue\" style=\"fill:#00ff00\" /> </svg>\n          <svg id=\"addrFalse\"  style=\"display:none\"  width=\"18\" height=\"16\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\"><path d=\"M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z\" id=\"addressIsFalse\" style=\"fill:#ff0000\"/></svg>   \n    </li> \n    <li class=\"list-group-item\"> HASH:<p id=\"iamHash\" style=\"word-wrap:break-word\"> </p></li> \n    <li class=\"list-group-item\">SIGNATURE <p id=\"iamSignature\" style=\"word-wrap:break-word\"></p></li> \n    </ol>\n    \n    <div class=\"card text-center\">\n    <div class=\"card-footer text-muted\">\n      ${output + \" ago\"}\n      <a style=\"display:none\" href=\"ethereum:0x1c87FDF8844cbEe5DC7f0F1681C44bF3c99A0e3d?value=50000000000000000&gas=21000&gasPrice=5000000000\">Donate ETH to 0x1c87FDF8844cbEe5DC7f0F1681C44bF3c99A0e3d</a>\n    </div>\n  </div>\n`\n    \n\n//QR\nconst qrCode = new QRCodeStyling({ width: 300, height: 300, type: \"png\", data: fulllinkfromCID, image: `logoIN6.png`, \ndotsOptions: { color: \"#1568B0\", type: \"extra-rounded\" }, \nbackgroundOptions: { color: \"var(--qrbackground)\", }, \nimageOptions: { crossOrigin: \"anonymous\", margin: 0 } });\nqrCode.append(document.getElementById(\"canvas\"));\nconsole.log('qr code ADDED')\n\n\n\n// ADD DOCS\n    docs.forEach((e => {\n        let t = e.title,\n            n = e.cid,\n            i = e.courtesy_translations;\n        var s = [];\n        i.forEach(((e, t) => {\n            let n = e.lang,\n                i = `<button type=\"button\" class=\"btn btn-outline-info px-3 waves-effect\" onclick=\"event.stopPropagation(); viewItem('${e.cid}')\"> \\n                    <span>${n} </span><svg width=\"18\" height=\"16\" class=\"svg-inline--fa fa-language\" aria-hidden=\"true\" data-prefix=\"fas\" data-icon=\"language\" role=\"img\" viewBox=\"0 0 640 512\"> <path fill=\"currentColor\" d=\"M0 128c0-35.3 28.7-64 64-64h512c35.3 0 64 28.7 64 64v256c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128zm320 0v256h256V128H320zm-141.7 47.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1.1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2l19 42.8h-38l19-42.8zM448 164c11 0 20 9 20 20v4h60c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4.9.6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9L467 333.8c-4.5-2.7-8.8-5.5-13.1-8.5-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8L410 286.1c-7.8-7.8-7.8-20.5 0-28.3s20.5-7.8 28.3 0l14.6 14.6.5.5c12.4-13.1 22.5-28.3 29.8-45H376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z\" /> </svg> \\n                </button> `;\n            s.push(i)\n        }));\n        let o = ` <tr> <td>${t} </td> <td> <p class='card-link' onclick=\"event.stopPropagation();copyItem('${n}')\"> ${n}</p> </td> <td> <button type=\"button\" class=\"btn btn-outline-info px-3 waves-effect\" onclick=\"event.stopPropagation();viewItem('${n}')\"> <svg width=\"18\" height=\"16\" class=\"svg-inline--fa fa-eye\" aria-hidden=\"true\" data-prefix=\"fas\" data-icon=\"eye\" role=\"img\" viewBox=\"0 0 576 512\"> <path fill=\"currentColor\" d=\"M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4 142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1 3.3-7.9 3.3-16.7 0-24.6-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zm144 224c0 79.5-64.5 144-144 144s-144-64.5-144-144 64.5-144 144-144 144 64.5 144 144zm-144-64c0 35.3-28.7 64-64 64-11.5 0-22.3-3-31.6-8.4-.2 2.8-.4 5.5-.4 8.4 0 53 43 96 96 96s96-43 96-96-43-96-96-96c-2.8 0-5.6.1-8.4.4 5.3 9.3 8.4 20.1 8.4 31.6z\" /> </svg> </button> ${s.join(\"\")} </td> </tr>`;\n        tbody.innerHTML += o\n    }));\n    \n    \n    content.style.display= 'block'\n\n    // customLoader.style.display = \"none\"\n    document.getElementById('loader').style.display='none'\n    console.log('LOADER DELETED!')\n\n    getAddressBalance(userAddress)\n    .then(balance => {\n          console.log(`Balance of ${userAddress}: ${balance} ETH`);  \n          document.getElementById('amount').innerHTML= ` ${balance} ETH`\n    })\n    .catch(error => {\n      console.error('Error:', error);\n    });\n  }\n\n\n   // *********************************\n  // DELETE /REVOKE ATTESATION IPFS DISTRO\n  // *********************************\n  function deleteIpfsDistro(obj) {\n    console.log(\"Delete IPFS Distro...\",obj);\n\n    Swal.fire({\n      title: 'revoke IPFS website attestation?',\n      text: \"You won't be able to revert this!\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Yes, revoke it!'\n    }).then((result) => {\n      if (result.isConfirmed) {\n\n    let index =obj.children[0].innerText;\n    let i = Number(index);\n    console.log('index:', i)\n     RemoveFromLocalStorage(i);\n\n     localStorage.removeItem('IPFSdistributions')\n\n     setTimeout(() => {\n      Toastcenter.fire( '',`revoked!`, \"info\");\n      init();\n    }, 500);\n\n\n      }\n    })\n}\n\n    // *********************************\n  // viewIpfsDistro\n  // *********************************\n  function viewIpfsDistro(url) {\n    window.open(url, '_blank').focus();\n\n  }\n\n\n\n  function editIpfsDistro(obj) {//delete ipfsdistro!\n    console.log(\"editIpfsDistro: \",obj);\n    addEditDocumentsUI()\n    loadDocs()\n    restoreEnvoiButton()\n    reloadTranslations()\n  }\n\n\n\n  function restoreEnvoiButton(){\n    let IPFSDELIVERY = localStorage.getItem('IPFSdistributions')\nif(!localStorage.getItem('IPFSdistributions')){\n    console.log('THERE IS NO IPFSdistributions ')\n\n    document.getElementById('addDocsButtons').innerHTML=`  \n    <button class=\"btn btn-warning btn-lg\"  onclick=\"event.stopPropagation();canceleditIpfsDistro((this.parentElement))\"><i class=\"fas fa-pencil\" aria-hidden=\"true\"></i> Cancel edit </button>`\n    reloadTranslations()\n\n    } else {\n        console.log('YES THERE IS a IPFSdistributions ')\n        document.getElementById('addDocsButtons').innerHTML=`  <button class=\"btn btn-primary btn-lg \" id=\"createIPFSDelivery\" onclick=\"event.stopPropagation();createIPFSDelivery((this.parentElement))\"  data-translate=\"publicipfs\"> <i class=\"fa-solid fa-envelope-circle-check\"></i> Preparer comme Envoi IPFS</button> <button class=\"btn btn-warning btn-lg\"  onclick=\"event.stopPropagation();canceleditIpfsDistro((this.parentElement))\"><i class=\"fas fa-pencil\" aria-hidden=\"true\"></i> Cancel edit </button>`\n        reloadTranslations()\n    }\n  }\n  \n\n  function canceleditIpfsDistro(obj) {\n    document.getElementById('soveraindocspremint').style.display='none'\n    \n    let nftisMinted = localStorage.getItem('nftisMinted')\n    // loadIpfsDistros()\n    if (!nftisMinted){\n      console.log('there is not minted NFT')\n      reloadIpfsDistros()\n      \n    }else{\n      console.log('NFT is minted')\n      reloadIpfsNFT()\n      return\n    }\n \n}\n\n\n\n  // *********************************\n  // reloadIpfsNFT()\n  // *********************************\n  async function reloadIpfsNFT(){\n    console.log('reloadIpfsNFT ')\n    let index = 0 ;\n    // ADD IAM\n    let ipfsDistros = JSON.parse(window.localStorage.getItem('IPFSdistributions'));\n    if(!ipfsDistros){\n        console.log('THERE IS NO ipfsDistros')\n        return\n    }\n\n    let ipfsdist = JSON.parse(ipfsDistros[0].signedJSON)\n    let iamcode = ipfsdist.iamCode;\n    let cid = ipfsdist.cid;\n    console.log('CID: ', ipfsdist)\n    // ----------------\n    // CALCULATE TIME PASSED\n        function formatTimeComponent(value, unit) {\n          return value === 1 ? `${value} ${unit}` : `${value} ${unit}s`;\n        }\n\n        // Example Unix timestamp in seconds\n        // const unixTimestampInSeconds = 1678771200;\n        const unixTimestampInSeconds = ipfsDistros[0].timestamp;\n\n        // Convert the Unix timestamp to milliseconds\n        const unixTimestampInMillis = unixTimestampInSeconds * 1000;\n\n        // Get the current time in milliseconds\n        const currentTimeInMillis = new Date().getTime();\n\n        // Calculate the time difference in milliseconds\n        const timeDifferenceInMillis = currentTimeInMillis - unixTimestampInMillis;\n\n        // Convert the time difference to days, hours, minutes, and seconds\n        const daysPassed = Math.floor(timeDifferenceInMillis / (1000 * 60 * 60 * 24));\n        const hoursPassed = Math.floor((timeDifferenceInMillis % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n        const minutesPassed = Math.floor((timeDifferenceInMillis % (1000 * 60 * 60)) / (1000 * 60));\n        const secondsPassed = Math.floor((timeDifferenceInMillis % (1000 * 60)) / 1000);\n\n        // Build the output string\n        let output = \"Updated \";\n        if (daysPassed > 0) {\n          output += formatTimeComponent(daysPassed, \"day\");\n        }\n        if (hoursPassed > 0) {\n          output += formatTimeComponent(hoursPassed, \"hour\");\n        }\n        if (minutesPassed > 0) {\n          output += formatTimeComponent(minutesPassed, \"minute\");\n        }\n        if (daysPassed === 0 && hoursPassed === 0 && minutesPassed === 0) {\n          output += formatTimeComponent(secondsPassed, \"second\");\n        }\n\n        console.log(output + \" ago\");\n\n\n\n\n\n    // -------------\n    let lIDC = localStorage.getItem('lastIpfsDistroCID');\n    if(!lIDC){ console.log('CID v2 NOT FOUND',lIDC) \n  } else { \n      console.log('CID v2: ', lIDC) \n      // create link from cid\n      // let fulllinkfromCID = lIDC;\n      let fulllinkfromCID = `${ipfsGateway}${lIDC}`\n    console.log('fulllinkfromCID: ', fulllinkfromCID)\n\n    }\n    let docs = ipfsdist.iamDocuments;\n    console.log('DOCS LENGTH: ', docs.length)\n    linkIPFS = `${ipfsGateway}${lIDC}`;// dejar el espacio para poder cambiar el link ipfs desde la UI en caso de update\n    console.log('linkIPFS???',linkIPFS)\n    let srcimg = await JSON.parse(window.localStorage.getItem('image'));\n    if(!srcimg){ console.log('NO SRCIMG'); return}\n    let img =  srcimg\n\n    // get offchain attestation\n        let offchainAttestation = localStorage.getItem('iamAttestation')\n        let fulloffchainAttestation = localStorage.getItem('fullAttestation')\n\n\nconsole.log('CLEARING #MAIN')\ndocument.getElementById('soveraindocs').setAttribute('style', 'display:inline!important');\n    soveraindocs.innerHTML = ` \n    <div class=\"container\">\n    <div class=\"row\">\n    <div class=\"col-md-6 center\">\n    <div class=\"card flex-row mb-4\">\n    <div class=\"card-body\">\n    <div id=\"canvas\"></div>\n    \n    </div>\n    </div>\n    </div>\n    \n    <div class=\"col-md-6\">\n    <div class=\"card flex-row mb-4\">\n    <div class=\"card-body\">\n    <p class=\"card-text published\">Public Documents (<code>${docs.length}</code>): <code>   \n    <a href=\"${fulllinkfromCID}\" target=\"_blank\" rel=\"noopener noreferrer\">lIDC</a>\n    \n    <i class=\"fas fa-trash\" aria-hidden=\"true\" onclick=\"event.stopPropagation();deleteIpfsDistro((this.parentElement))\"></i> \n    \n    </code></p>\n    <p class=\"card-text\">Full Attestation: <code>\n    <a href=\"${fulloffchainAttestation}\" target=\"_blank\" rel=\"noopener noreferrer\">offchain attestation</a>\n    <a href=\"#\" class=\"btn btn-warning\" onclick=\"event.stopPropagation();editIpfsDistro()\">make onchain</a>\n    \n    </code></p>\n    <p class=\"card-text\">NFT: \n    <code>  \n     <button class='linktypebuton' onclick=\"event.stopPropagation();mint()\">mint(onchain)</button>\n    \n    <i class=\"fas fa-trash\" style=\"display:none\" aria-hidden=\"true\" onclick=\"event.stopPropagation();burnNFT((this.parentElement))\"></i> \n    \n    </code>\n\n    </p>\n    \n    <div class=\"card flex-row mb-4\">\n\n\n    <a href=\"#\" class=\"btn btn-danger\" onclick=\"event.stopPropagation();receive()\" data-bs-toggle=\"tooltip\" title=\"Receive\"><i class=\"fas fa-satellite-dish\"></i> </a>\n    <a href=\"#\" class=\"btn btn-success\" onclick=\"event.stopPropagation();openWalletSend()\"  data-bs-toggle=\"tooltip\"  title=\"Send\"><i class=\"fas fa-paper-plane\"></i> </a>\n    <button id='amount'> \n\n          <div id=\"loader\" class=\"loader\">\n          <i class=\"fas fa-circle-notch fa-spin\"></i>\n        </div>\n          </button>\n\n\n          </div>\n          <br>\n\n    <a href=\"#\"  style=\"display:none\" class=\"btn btn-primary\" onclick=\"event.stopPropagation();mintUPT()\">+ATTEST</a>\n    <a href=\"#\" class=\"btn btn-primary\" onclick=\"event.stopPropagation();editIpfsDistro()\">+DOCUMENTS</a>\n\n\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div id=\"content\" class=\"container\" style=\"display:none\">\n\n    <div id=\"head\"> \n          <div id=\"iamInfo\"> \n                <h1 id=\"iamCode\">\n                <a class=\"iamlink\" href=\"${offchainAttestation}\" target=\"_blank\" rel=\"noopener noreferrer\">${iamcode}</a>   \n                </h1> \n                <h3 id=\"iamTokenId\"></h3> \n          </div>\n          <img id=\"iamImg\" src=\"${img}\" > \n    </div> \n    \n    <table class=\"table\" id=\"myTable\" data-card-width=\"837\"> \n          <thead> <tr> \n          <th data-card-title=\"\">Title</th> \n          <th data-card-action-links=\"\">CID</th> \n       <th data-card-footer=\"\">Attestation</th> \n       \n          \n          </tr> </thead> <tbody id=\"tbody\"> </tbody> \n    </table> \n    </div> \n    \n    <ol id=\"footer\" class=\"list-group list-group-numbered container\" style=\"display:none\"> \n    <li class=\"list-group-item\">ADDRESS: <br>\n          <p id=\"iamAddress\" style=\"word-wrap:break-word\"></p>\n          <svg id=\"addrTrue\"  style=\"display:none\" width=\"18\" height=\"16\" viewBox=\"0 0 512 512\"  xmlns:svg=\"http://www.w3.org/2000/svg\">   <path d=\"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z\" id=\"addressIsTrue\" style=\"fill:#00ff00\" /> </svg>\n          <svg id=\"addrFalse\"  style=\"display:none\"  width=\"18\" height=\"16\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\"><path d=\"M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z\" id=\"addressIsFalse\" style=\"fill:#ff0000\"/></svg>   \n    </li> \n    <li class=\"list-group-item\"> HASH:<p id=\"iamHash\" style=\"word-wrap:break-word\"> </p></li> \n    <li class=\"list-group-item\">SIGNATURE <p id=\"iamSignature\" style=\"word-wrap:break-word\"></p></li> \n    </ol>\n    \n    <div class=\"card text-center\">\n    <div class=\"card-footer text-muted\">\n      ${output + \" ago\"}\n      <a style=\"display:none\" href=\"ethereum:0x1c87FDF8844cbEe5DC7f0F1681C44bF3c99A0e3d?value=50000000000000000&gas=21000&gasPrice=5000000000\">Donate ETH to 0x1c87FDF8844cbEe5DC7f0F1681C44bF3c99A0e3d</a>\n    </div>\n  </div>\n`\n    \n\n//QR\nconst qrCode = new QRCodeStyling({ width: 300, height: 300, type: \"png\", data: lIDC, image: `logoIN6.png`, \ndotsOptions: { color: \"#1568B0\", type: \"extra-rounded\" }, \nbackgroundOptions: { color: \"var(--qrbackground)\", }, \nimageOptions: { crossOrigin: \"anonymous\", margin: 0 } });\nqrCode.append(document.getElementById(\"canvas\"));\nconsole.log('qr code ADDED')\n\n\n\n// ADD DOCS\n    docs.forEach((e => {\n        let t = e.title,\n            n = e.cid,\n            i = e.courtesy_translations;\n        var s = [];\n        i.forEach(((e, t) => {\n            let n = e.lang,\n                i = `<button type=\"button\" class=\"btn btn-outline-info px-3 waves-effect\" onclick=\"event.stopPropagation(); viewItem('${e.cid}')\"> \\n                    <span>${n} </span><svg width=\"18\" height=\"16\" class=\"svg-inline--fa fa-language\" aria-hidden=\"true\" data-prefix=\"fas\" data-icon=\"language\" role=\"img\" viewBox=\"0 0 640 512\"> <path fill=\"currentColor\" d=\"M0 128c0-35.3 28.7-64 64-64h512c35.3 0 64 28.7 64 64v256c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128zm320 0v256h256V128H320zm-141.7 47.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1.1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2l19 42.8h-38l19-42.8zM448 164c11 0 20 9 20 20v4h60c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4.9.6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9L467 333.8c-4.5-2.7-8.8-5.5-13.1-8.5-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8L410 286.1c-7.8-7.8-7.8-20.5 0-28.3s20.5-7.8 28.3 0l14.6 14.6.5.5c12.4-13.1 22.5-28.3 29.8-45H376c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20z\" /> </svg> \\n                </button> `;\n            s.push(i)\n        }));\n        let o = ` <tr> <td>${t} </td> <td> <p class='card-link' onclick=\"event.stopPropagation();copyItem('${n}')\"> ${n}</p> </td> <td> <button type=\"button\" class=\"btn btn-outline-info px-3 waves-effect\" onclick=\"event.stopPropagation();viewItem('${n}')\"> <svg width=\"18\" height=\"16\" class=\"svg-inline--fa fa-eye\" aria-hidden=\"true\" data-prefix=\"fas\" data-icon=\"eye\" role=\"img\" viewBox=\"0 0 576 512\"> <path fill=\"currentColor\" d=\"M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4 142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1 3.3-7.9 3.3-16.7 0-24.6-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zm144 224c0 79.5-64.5 144-144 144s-144-64.5-144-144 64.5-144 144-144 144 64.5 144 144zm-144-64c0 35.3-28.7 64-64 64-11.5 0-22.3-3-31.6-8.4-.2 2.8-.4 5.5-.4 8.4 0 53 43 96 96 96s96-43 96-96-43-96-96-96c-2.8 0-5.6.1-8.4.4 5.3 9.3 8.4 20.1 8.4 31.6z\" /> </svg> </button> ${s.join(\"\")} </td> </tr>`;\n        tbody.innerHTML += o\n    }));\n    \n    \n    content.style.display= 'block'\n\n    // customLoader.style.display = \"none\"\n    document.getElementById('loader').style.display='none'\n    console.log('LOADER DELETED!')\n\n    getAddressBalance(userAddress)\n    .then(balance => {\n          console.log(`Balance of ${userAddress}: ${balance} ETH`);  \n          document.getElementById('amount').innerHTML= ` ${balance} ETH`\n    })\n    .catch(error => {\n      console.error('Error:', error);\n    });\n  }\n"],"names":[],"version":3,"file":"index.61c547c9.js.map","sourceRoot":"/__parcel_source_root/"}